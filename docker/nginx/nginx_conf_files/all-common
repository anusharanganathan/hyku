# common proxy settings
proxy_buffers             64 16k;
proxy_max_temp_file_size  1024m;
proxy_connect_timeout     5s;
proxy_send_timeout        10s;
proxy_read_timeout        10s;

# log settings
access_log                /var/log/nginx.access.log; # /dev/stdout;
error_log                 /var/log/nginx.error.log;  # /dev/stderr info;

# serve static (compiled) assets directly if they exist (for rails production)
location ~ ^/(assets|images|javascripts|stylesheets|swfs|system)/   {
  try_files               $uri @rails_app;
  access_log              off;
  gzip_static             on;
  # to serve pre-gzipped version
  expires                 max;
  add_header              Cache-Control public;
  add_header              Last-Modified "";
  add_header              ETag "";
  break;
}

location / {
  try_files $uri $uri/ @rails_app;
}
